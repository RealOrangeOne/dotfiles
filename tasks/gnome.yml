- name: "Add nautilus file templates"
  copy:
    src: ./files/Templates
    dest: "{{ home }}/Templates"
    mode: 0755
    owner: "{{ user }}"
    group: users
    directory_mode: true

- name: "Install Gnome packages"
  aur:
    skip_installed: true
    name: "{{ item }}"
  become: true
  become_user: aur_builder
  when: "item not in installed_packages.stdout_lines"
  with_items:
    - baobab
    - cheese
    - eog
    - evince
    - file-roller
    - fractal
    - gnome-calculator
    - gnome-disk-utility
    - gnome-latex
    - gnome-system-monitor
    - gnome-usage
    - nautilus

- name: "Install GTK tools"
  aur:
    skip_installed: true
    name: "{{ item }}"
  become: true
  become_user: aur_builder
  when: "item not in installed_packages.stdout_lines"
  with_items:
    - 'lxappearance'
    - 'numix-gtk-theme'
    - 'numix-square-icon-theme'
    - 'qt5-styleplugins'


- name: Patch out terrible looking QT
  patch:
    src: './files/xsession.patch'
    dest: '/etc/lightdm/Xsession'
  when: antergos

- name: Set GTK theme
  dconf:
    key: "/org/gnome/desktop/interface/gtk-theme"
    value: '"Numix"'
  become: true
  become_user: "{{ user }}"

- name: Set GTK icon theme
  dconf:
    key: "/org/gnome/desktop/interface/icon-theme"
    value: '"Numix-Square"'
  become: true
  become_user: "{{ user }}"

- name: "Install GTK2 config"
  copy:
    src: './files/gtkrc-2.0'
    dest: '{{ home }}/.gtkrc-2.0'
    mode: 0644
    owner: "{{ user }}"

- name: "Install GTK3 config"
  copy:
    src: './files/gtk3-settings.ini'
    dest: '{{ home }}/.config/gtk-3.0/settings.ini'
    mode: 0644
    owner: "{{ user }}"
